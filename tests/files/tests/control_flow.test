call
----
.entry main

main:
    push 1
    push 2
    call add
    ret

add:
    load 0
    load 1
    add
    ret.w
----
ok
stack [3]

recursive-call
----
.entry main

main:
    push 6
    call factorial
    ret

; factorial(x):
;   if x == 0 return 1;
;   return x * factorial(x - 1)
factorial:
    load 0
    push 0
    cmp
    jmp.ne l0
    push 1
    ret.w
l0:
    load 0
    push 1
    sub
    call factorial
    load 0
    mul
    ret.w
----
ok
stack [720]

while
----
.entry main

main:
    push 6
    call factorial
    ret

; factorial(x):
;   result = 1;
;   while (x > 0):
;     result = result * x;
;     x = x - 1;
;   return result;
factorial:
    push 1
    store 1
l0:
    load 0
    push 0
    cmp
    jmp.le l1
    load 0
    load 1
    mul
    store 1
    load 0
    push 1
    sub
    store 0
    jmp l0
l1:
    load 1
    ret.w
----
ok
stack [720]
